<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>DEMO</title>
    <style media="screen">
      #demo-element {
        width: 300px;
        border: 1px solid black;

      }
      body {
        overflow:hidden;
      }
      ul {
        overflow: hidden;
        height: 100vh;
      }
      li {
        width: 300px;
        font-size: 2em;
        padding: 30px;
        list-style-type: none;
        text-align: center;
        /*transition: transform 100ms linear;*/
      }
    </style>
  </head>
  <body>
    <ul id="demo-element">
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
      <li>Item 4</li>
      <li>Item 5</li>
      <li>Item 10</li>
      <li>Item 11</li>
      <li>Item 12</li>
      <li>Item 13</li>
      <li>Item 14</li>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
      <li>Item 4</li>
      <li>Item 5</li>
      <li>Item 10</li>
      <li>Item 11</li>
      <li>Item 12</li>
      <li>Item 13</li>
      <li>Item 14</li>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
      <li>Item 4</li>
      <li>Item 5</li>
      <li>Item 10</li>
      <li>Item 11</li>
      <li>Item 12</li>
      <li>Item 13</li>
      <li>Item 14</li>

    </ul>

    <script src="tweenjs.js"></script>
    <script type="text/javascript">
      var startY = 0;

      var box = document.getElementById("demo-element");
      var elements = document.getElementsByClassName("elements");
      var speed = 0; // in px/millisecond
      var friction = 0.0005; // in px/millisecond^2
      var isRunning = false;

      //var position = 0;
      var timeSinceLastFrame = 0;
      var lastTime = 0;
      var deltaY = 0;


      function move (e) {
        deltaY = e.deltaY * -1;

        speed += (deltaY/30) + (Math.min(Math.abs(speed)/100), 0) * Math.sign(speed);
        console.log("SPEED: ", speed);

        sign = getSign();

        function getSign() {
          // NOTE: Use Math.sign() instead;
          return deltaY<0 ? sign="-" : sign="+";
        }

        // AddMovemnt function needed

        //console.log("speed: ", speed);

        if (isRunning == false) {
          lastTime = performance.now();
          isRunning = true;
          requestAnimationFrame(animate);
        }
      }

      document.addEventListener("wheel", move);

      //uses quadratic out easing
      function getMeY(timePassed) {
        //console.log("Ydelta: ", timePassed * (sign=="-" ? -speed : speed));
        //return timePassed * (sign=="-" ? -speed : speed);
        return timePassed * speed;
        //return distance * (timeInPercent*(2-timeInPercent));
      }
      function animate() {
        var now = performance.now();
        var timeSinceLastFrame = Math.floor(now - lastTime);

        lastTime = now;

        if (speed != 0) {
          requestAnimationFrame(animate);

          box.style.setProperty('transform', `translateY(${startY+=Math.round(getMeY(timeSinceLastFrame))}px)`);

          // NOTE: The following could be prettier
          speed = Math.sign(speed)==-1 ? Math.min(speed + friction * (timeSinceLastFrame*5), 0) : Math.max(speed - friction * (timeSinceLastFrame*5), 0);
        }

        if (speed == 0) {
          isRunning = false;
          return;
        }


      }

    </script>
  </body>
</html>
